<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/search.css') }}">
</head>

<body>
    {% include 'navbar.html' %}

    <div class="container mt-5">
        {% if query %}
        <h1 class="mb-4">Search Results for "<span class="text-success">{{ query }}</span>"</h1>
        {% else %}
        <h1 class="mb-4">Search Results: <span class="text-success text-uppercase">all</span></h1>
        {% endif %}

        {% if results.news and results.projects %}
        <nav class="mb-4 d-md-none">
            <div class="btn-group w-100" role="group" aria-label="Section navigation">
                <a class="btn btn-outline-success" href="#news-section">Go to News</a>
                <a class="btn btn-outline-success" href="#projects-section">Go to Projects</a>
            </div>
        </nav>
        {% endif %}

        {% if results.news or results.projects %}
        <div class="row">
            <!-- News Section -->
            {% if results.news %}
            <div class="col-md-6" id="news-section">
                <h2 class="mb-3">News</h2>
                <div class="results-container">
                    {% for news in results.news %}
                    <div class="result-card">
                        <!-- News Image -->
                        {% if news.image_path and news.image_path != 'None' %}
                        <img src="{{ url_for('static', filename='uploads/' + news.image_path) }}" alt="{{ news.name }}" class="result-image">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/default-news.png') }}" alt="Default News Image" class="result-image">
                        {% endif %}
        
                        <!-- News Content -->
                        <div class="result-content">
                            <h5 class="fw-bold">{{ news.name }}</h5>
                            <p class="text-muted">{{ news.location }} | {{ news.date }}</p>
        
                            <!-- Read More Button -->
                            <a href="{{ url_for('news.view_news', news_id=news.id, lang=lang) }}" class="btn btn-success btn-sm">
                                Read More
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        
            <!-- Projects Section -->
            {% if results.projects %}
            <div class="col-md-6" id="projects-section">
                <h2 class="mb-3">Projects</h2>
                <div class="results-container">
                    {% for project in results.projects %}
                    <div class="result-card">
                        <!-- Project Image -->
                        {% if project.image_path and project.image_path != 'None' %}
                        <img src="{{ url_for('static', filename='uploads/' + project.image_path) }}" alt="{{ project.name }}" class="result-image">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/default-project.png') }}" alt="Default Project Image" class="result-image">
                        {% endif %}
            
                        <!-- Project Content -->
                        <div class="result-content">
                            <h5 class="fw-bold">
                                {{ project.name }}
                                <!-- âœ… Status Badge (Green = Finished, Yellow = In Progress) -->
                                {% if project.finished %}
                                <span class="badge bg-success">Finished</span>
                                {% else %}
                                <span class="badge bg-warning text-dark">In Progress</span>
                                {% endif %}
                            </h5>
                            <p class="text-muted">{{ project.location }}</p>
            
                            <!-- Read More Button -->
                            <a href="{{ url_for('projects.view_project', project_id=project.id, lang=lang) }}" class="btn btn-success btn-sm">
                                Read More
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
        {% else %}
        <div class="no-results-container">
            <div class="no-results-card">
                <img src="{{ url_for('static', filename='images/default-project.png') }}" alt="No Results" class="no-results-image">
                <h4 class="no-results-title">
                    No results found for <span class="query-highlight">"{{ query }}"</span>
                </h4>
                <p class="no-results-text">
                    Try searching with different keywords or explore more about us.
                </p>
                <a href="{{ url_for('about_us.load_about_us', lang=lang) }}" class="btn btn-primary">
                    Return to About Us
                </a>
            </div>
        </div>
        {% endif %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>
